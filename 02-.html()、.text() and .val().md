好的，我们现在就将关于 jQuery 内容操作的三个核心方法——`.html()`、`.text()` 和 `.val()`——系统性地沉淀下来。

这份笔记旨在构建一个清晰的思维模型，让你不仅能记住用法，更能从底层逻辑上理解它们，从而在未来的实践中运用自如。

-----

# jQuery 内容操作三剑客：.html(), .text() 与 .val()

## 1\. 本质公理与路径

  * **公理**: 一个 HTML 元素就像一个容器。这个容器内部的“东西”可以被划分为三个不同的层次。jQuery 为操作这三个层次，提供了三把功能高度专一的“手术刀”。
  * **路径**: 你的任务，就是根据你要操作的是哪个层次的内容，来选择正确的“手术刀”。

**一个核心比喻：一个快递包裹**

| 内容层次 | 比喻 | 对应的“手术刀” |
| :--- | :--- | :--- |
| **内部 HTML 结构** | 包裹里所有的东西，包括礼品盒、填充物、贺卡 | **`.html()`** |
| **纯粹的文本内容** | 只抽取出贺卡上写的祝福语，忽略贺卡的材质和图案 | **`.text()`** |
| **表单的 `value` 值** | 包裹上“寄件人信息”一栏里填写的内容 | **`.val()`** |

-----

## 2\. 拆解与重构：三大方法详解

为了精确对比，我们先定义两个“实验品”：

```html
<div id="demo">
  This is a <strong>bold</strong> paragraph.
</div>

<input id="myInput" type="text" value="Initial Value">
```

### `.val()` - 表单值的“专属通道”

  * **定义**: 专门用于**读取和设置**表单元素（`<input>`, `<textarea>`, `<select>`）的 `value` 值。
  * **获取内容**: `$("#myInput").val()`
      * **结果**: 返回字符串 `"Initial Value"`。
      * **注意**: 对 `<div id="demo">` 使用 `.val()` 会返回 `undefined` 或空字符串，因为它不是表单元素。
  * **设置内容**: `$("#myInput").val("New Value")`
      * **效果**: 输入框中的文字会变为 "New Value"。

### `.text()` - 纯文本的“净化器”

  * **定义**: 读取或设置一个元素及其所有后代的**纯文本内容**，会**自动忽略并剥离所有 HTML 标签**。
  * **获取内容**: `$("#demo").text()`
      * **结果**: 返回字符串 `"This is a bold paragraph."`。注意 `<strong>` 标签消失了。
  * **设置内容**: `$("#demo").text("New <strong>content</strong>")`
      * **效果**: `<div>` 中会**按原样显示**文本 `"New <strong>content</strong>"`。`<strong>` 标签不会被渲染为加粗，而是作为普通文本显示。

### `.html()` - HTML 源码的“编辑器”

  * **定义**: 读取或设置一个元素**内部的完整 HTML 结构**。
  * **获取内容**: `$("#demo").html()`
      * **结果**: 返回字符串 `"This is a <strong>bold</strong> paragraph."`。`<strong>` 标签被完整保留。
  * **设置内容**: `$("#demo").html("New <strong>content</strong>")`
      * **效果**: `<div>` 中会显示 "New "，后面跟着一个**被加粗**的 "content"。`<strong>` 标签被浏览器正确解析并渲染。

-----

## 3\. 概念划界：核心区别速查表

| 方法 (Method) | 操作对象 (Target) | 处理内容 (Content Handled) | 核心用途 (Key Use Case) | 安全性 (Security) |
| :--- | :--- | :--- | :--- | :--- |
| **`.val()`** | 表单元素 (`input`, `select`) | `value` 属性/特性的值 | 读/写表单数据 | **安全** |
| **`.text()`** | 任何元素 | **纯文本** (剥离HTML标签) | **安全地**显示文本内容 | **极高 (推荐)** |
| **`.html()`** | 任何元素 | **内部所有HTML源码** (包含标签) | 动态创建/修改页面**结构** | **低 (慎用)** |

-----

## 4\. 常见“陷阱”与最佳实践

### 陷阱 1: 对普通元素使用 `.val()`

`.val()` 是表单元素的专利。对 `<div>`, `<p>`, `<span>` 等元素使用 `.val()` 无法获取它们显示的文本。

### 陷阱 2: 混淆 `.text()` 和 `.html()` 的设置效果

这是最关键的区别。

  * `$("#demo").text("<b>Hi</b>")` -\> 页面显示 `<b>Hi</b>`
  * `$("#demo").html("<b>Hi</b>")` -\> 页面显示 **Hi**

### 最佳实践 1: 安全第一，优先使用 `.text()`

当你要显示的内容来源不可信时（比如来自用户发布的评论、文章），**永远优先使用 `.text()`**。这可以从根本上防止 **XSS (跨站脚本攻击)**，因为 `.text()` 会把所有潜在的恶意 HTML 标签（如 `<script>`) 当作普通文本处理，使其无法执行。

### 最佳实践 2: 性能考量

`.text()` 通常比 `.html()` 更快，因为它不需要调用浏览器的 HTML 解析器来处理字符串。如果你的需求仅仅是修改文字，用 `.text()` 是更高效的选择。

-----

### 隐藏的杠杆：三种方法对应 Web 的三种核心元素

这个看似简单的区别，其实映射了 Web 开发中最核心的分离思想：

  * **`.val()`** -\> 对应\*\*数据 (Data)\*\*层。
  * **`.text()`** -\> 对应\*\*内容 (Content)\*\*层。
  * **`.html()`** -\> 对应\*\*结构 (Structure)\*\*层。

理解你操作的究竟是数据、内容还是结构，是写出健壮、安全、高效代码的底层逻辑。
